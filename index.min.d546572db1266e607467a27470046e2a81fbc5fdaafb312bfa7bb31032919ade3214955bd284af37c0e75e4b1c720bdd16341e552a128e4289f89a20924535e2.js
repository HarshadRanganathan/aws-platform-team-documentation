var suggestions=document.getElementById('suggestions'),search=document.getElementById('search');search!==null&&document.addEventListener('keydown',inputFocus);function inputFocus(a){a.ctrlKey&&a.key==='/'&&(a.preventDefault(),search.focus()),a.key==='Escape'&&(search.blur(),suggestions.classList.add('d-none'))}document.addEventListener('click',function(a){var b=suggestions.contains(a.target);b||suggestions.classList.add('d-none')}),document.addEventListener('keydown',suggestionFocus);function suggestionFocus(c){const d=suggestions.classList.contains('d-none');if(d)return;const a=[...suggestions.querySelectorAll('a')];if(a.length===0)return;const b=a.indexOf(document.activeElement);if(c.key==="ArrowUp"){c.preventDefault();const d=b>0?b-1:0;a[d].focus()}else if(c.key==="ArrowDown"){c.preventDefault();const d=b+1<a.length?b+1:b;a[d].focus()}}(function(){var a=new FlexSearch.Document({tokenize:"forward",cache:100,document:{id:'id',store:["href","title","description"],index:["title","description","content"]}});a.add({id:0,href:"/docs/troubleshooting/aws-azs/",title:"AWS AZs",description:"Hi",content:"Hi\n"}).add({id:1,href:"/docs/project-guidelines/aws-java-sdk/",title:"AWS Java SDK",description:"Minimum SDK # It is recommended to use a minimum SDK version of 1.11.704 or above in your projects.\nError  Using an SDK below the minimum recommended version will cause your app to fail with Unable to locate credentials error. This is because we have disabled IMDS v1 (Instance metadata service used by your SDK to get credentials) for security reasons.\nLatest SDK versions use IMDS v2 for getting the credentials.",content:"Minimum SDK # It is recommended to use a minimum SDK version of 1.11.704 or above in your projects.\nError  Using an SDK below the minimum recommended version will cause your app to fail with Unable to locate credentials error. This is because we have disabled IMDS v1 (Instance metadata service used by your SDK to get credentials) for security reasons.\nLatest SDK versions use IMDS v2 for getting the credentials.\n FAQs # I have updated my application to use the latest SDK version but it still fails with Unable to locate credentials error.\nYour application might still be using an older SDK version. Try below steps to fix the problem.\n  Run mvn dependency:tree to view the hierarchy of project dependencies and add exclusions in your POM to remove older SDK dependencies.\n  Override the dependency via maven dependencyManagement section.\n  e.g.\n\u0026lt;dependencyManagement\u0026gt; \u0026lt;dependencies\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;com.amazonaws\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;aws-java-sdk-core\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;1.11.1000\u0026lt;/version\u0026gt; \u0026lt;scope\u0026gt;compile\u0026lt;/scope\u0026gt; \u0026lt;/dependency\u0026gt; \u0026lt;/dependencies\u0026gt; \u0026lt;/dependencyManagement\u0026gt;  "}).add({id:2,href:"/docs/getting-started/aws-console-access/",title:"AWS Console Access",description:"Console URL # We use SAML based federated login.\n  Bookmark this console URL\n  On Successful login, select the role that you want to assume. Your permissions will vary based on the role assumed.\n  Roles # Below are the roles available.\nPlease raise request to the appropriate role that you need.\n⚠️  Only request the least privilege role that you need      Account Role Targeted Users     Non-Prod AWS_xxxxx_Read PO   Non-Prod AWS_xxxxx_Contributor Developers   Non-Prod AWS_xxxxx_Owner Infrastructure Team    Contributor Role Restrictions Following actions are denied in the contributor role:",content:"Console URL # We use SAML based federated login.\n  Bookmark this console URL\n  On Successful login, select the role that you want to assume. Your permissions will vary based on the role assumed.\n  Roles # Below are the roles available.\nPlease raise request to the appropriate role that you need.\n⚠️  Only request the least privilege role that you need      Account Role Targeted Users     Non-Prod AWS_xxxxx_Read PO   Non-Prod AWS_xxxxx_Contributor Developers   Non-Prod AWS_xxxxx_Owner Infrastructure Team    Contributor Role Restrictions Following actions are denied in the contributor role:\n❌ IAM Create/Update/Delete\n❌ RDS DB Deletion\n❌ MSK Cluster deletion\n❌ Elasticsearch deletion\n❌ EKS Deletion\n❌ EKS Upgrades\n❌ S3 bucket deletion\n❌ Lambda deletion\n❌ RDS DB Proxy deletion\n❌ Route53 deletion\n❌ VPC deletion\n❌ Security Groups deletion\n❌ Step Functions deletion\n❌ API Gateway deletion\n❌ Cloudfront deletion\n❌ WAF deletion\n❌ Cloudwatch Events deletion\n Session Timeout # When your session times out, you will get below error:\n⚠️  There was a problem with your session. To start a new session return to the link provided by your administratorTo logout, click here   Or you may re-directed to an alternative AWS customer sign-in screen.\nDo not use the customer AWS sign-in screen, instead use the SAML federated link to login again.\n"}).add({id:3,href:"/docs/troubleshooting/emr-unknown-host-exception/",title:"EMR Unknown Host Exception",description:"Hi",content:"Hi\n"}).add({id:4,href:"/docs/project-guidelines/ecr/",title:"ECR",description:"Namespaces # Namespaces are a way to group similar repositories together.\ne.g. team-a/web-app, team-b/web-app, project-a/web-app\nUse:\nHelps to scope IAM policies so that pods running in a cluster can only pull images from a particular name-spaced repositories.\nGuidelines # ECR repositories should have namespaces for logical grouping.\nImmutability # You can configure a repository to be immutable to prevent image tags from being overwritten.\nThis can thwart an attacker from overwriting an image with a malicious version without changing the image\u0026rsquo;s tags.",content:"Namespaces # Namespaces are a way to group similar repositories together.\ne.g. team-a/web-app, team-b/web-app, project-a/web-app\nUse:\nHelps to scope IAM policies so that pods running in a cluster can only pull images from a particular name-spaced repositories.\nGuidelines # ECR repositories should have namespaces for logical grouping.\nImmutability # You can configure a repository to be immutable to prevent image tags from being overwritten.\nThis can thwart an attacker from overwriting an image with a malicious version without changing the image\u0026rsquo;s tags.\nAdditionally, it gives you a way to easily and uniquely identify an image.\nGuidelines # Repositories should be configured as immutable\nLifecycle Policy # It is recommended to apply below lifecycle policy to your ECR repository so that old images are cleaned up automatically.\nUntagged images \u0026ndash;\u0026gt; Delete after 7 days\nTagged images \u0026ndash;\u0026gt; Maintain up to 10 recent images\n{ \u0026quot;rules\u0026quot;: [ { \u0026quot;rulePriority\u0026quot;: 1, \u0026quot;description\u0026quot;: \u0026quot;Rule 1\u0026quot;, \u0026quot;selection\u0026quot;: { \u0026quot;tagStatus\u0026quot;: \u0026quot;untagged\u0026quot;, \u0026quot;countType\u0026quot;: \u0026quot;sinceImagePushed\u0026quot;, \u0026quot;countUnit\u0026quot;: \u0026quot;days\u0026quot;, \u0026quot;countNumber\u0026quot;: 7 }, \u0026quot;action\u0026quot;: { \u0026quot;type\u0026quot;: \u0026quot;expire\u0026quot; } }, { \u0026quot;rulePriority\u0026quot;: 2, \u0026quot;description\u0026quot;: \u0026quot;Rule 2\u0026quot;, \u0026quot;selection\u0026quot;: { \u0026quot;tagStatus\u0026quot;: \u0026quot;any\u0026quot;, \u0026quot;countType\u0026quot;: \u0026quot;imageCountMoreThan\u0026quot;, \u0026quot;countNumber\u0026quot;: 10 }, \u0026quot;action\u0026quot;: { \u0026quot;type\u0026quot;: \u0026quot;expire\u0026quot; } } ] }  "}).add({id:5,href:"/docs/getting-started/aws-cli-access/",title:"AWS CLI Access",description:"Installation #  Python Virtualenv AWS CLI  ",content:"Installation #  Python Virtualenv AWS CLI  "}).add({id:6,href:"/docs/project-guidelines/container-logs/",title:"Container Logs",description:"In the process of containerization, we should keep in mind that, the container is going to run anywhere in cloud environment.\nIn general, teams will use Kubernetes or any other services to run the containers.\nThese services have been enabled with built-in log forwarding of STDOUT/STDERR from containers to external services such as Cloudwatch, Splunk, ES etc.\nSo, it\u0026rsquo;s recommended to just write your logs to STDOUT/STDERR.\nFor example, you could have your log4j2.",content:"In the process of containerization, we should keep in mind that, the container is going to run anywhere in cloud environment.\nIn general, teams will use Kubernetes or any other services to run the containers.\nThese services have been enabled with built-in log forwarding of STDOUT/STDERR from containers to external services such as Cloudwatch, Splunk, ES etc.\nSo, it\u0026rsquo;s recommended to just write your logs to STDOUT/STDERR.\nFor example, you could have your log4j2.xml configured as follows:\n\u0026lt;Console name=\u0026quot;LogToConsole\u0026quot; target=\u0026quot;SYSTEM_OUT\u0026quot;\u0026gt; \u0026lt;PatternLayout\u0026gt; \u0026lt;Pattern\u0026gt;{ \u0026quot;date_time\u0026quot;:\u0026quot;%date\u0026quot;, \u0026quot;thread\u0026quot;:\u0026quot;[%thread]\u0026quot;, \u0026quot;log_level\u0026quot;:\u0026quot;%-5level\u0026quot;, \u0026quot;class_name\u0026quot;:\u0026quot;%logger{0}\u0026quot;, \u0026quot;log_message\u0026quot;:\u0026quot;%msg\u0026quot; }%n\u0026lt;/Pattern\u0026gt; \u0026lt;/PatternLayout\u0026gt; \u0026lt;/Console\u0026gt;  If you are running your containers in EKS, logs written to STDOUT/STDERR will automatically be rotated and cleared at regular intervals/based on size.\n⚠️  Do not write logs to the local file system!!   e.g.\n\u0026lt;File name=\u0026quot;LogToFile\u0026quot; fileName=\u0026quot;logs/log.txt\u0026quot;\u0026gt; \u0026lt;PatternLayout\u0026gt; \u0026lt;pattern\u0026gt;{ \u0026quot;date_time\u0026quot;:\u0026quot;%date\u0026quot;,\u0026quot;log_message\u0026quot;:\u0026quot;%msg\u0026quot; }%n\u0026lt;/pattern\u0026gt; \u0026lt;/PatternLayout\u0026gt; \u0026lt;/File\u0026gt;  Above will result in DiskPressure and will crash your nodes as the log size grows and you don\u0026rsquo;t have any custom mechanism to rotate and clear the logs.\n"}).add({id:7,href:"/docs/getting-started/terraform/guidelines/",title:"Terraform",description:"Terraform is used to allow users to easily and repeatably create resources.\nCreation of resources should not be done manually as this leaves a risk that they will not be repeatable should there be a failure or accidental deletion\nTags # We require below tags to be set for resources as it\u0026rsquo;ll help with easier tracing and cost tracking.\n   Tag Key Tag Value Purpose     Name  Useful name to identify individual resources   Application ID  Identify resources that are related to a specific application   Namespace/Application Role  Resource group/Describe the function of a particular resource (such as web server, message broker, database)   Stage alpha/stage/prod Distinguish between development, test, and production resources   ManagedBy terraform Indicates the process that manages the resource   TF Repo https://github.",content:"Terraform is used to allow users to easily and repeatably create resources.\nCreation of resources should not be done manually as this leaves a risk that they will not be repeatable should there be a failure or accidental deletion\nTags # We require below tags to be set for resources as it\u0026rsquo;ll help with easier tracing and cost tracking.\n   Tag Key Tag Value Purpose     Name  Useful name to identify individual resources   Application ID  Identify resources that are related to a specific application   Namespace/Application Role  Resource group/Describe the function of a particular resource (such as web server, message broker, database)   Stage alpha/stage/prod Distinguish between development, test, and production resources   ManagedBy terraform Indicates the process that manages the resource   TF Repo https://github.com/ TF Repository which was used to create the resource   Team Infra Platform Team which created the resource   Owner Infra Platform Identify who is responsible for the resource   Owner DL team@example.com DL for issues/notifications related to the resource   Cost Center  Identify the cost center or business unit associated with a resource, typically for cost allocation and tracking   Confidentiality Sensitive An identifier for the specific data confidentiality level a resource supports    "}).add({id:8,href:"/docs/getting-started/best-practices/",title:"Best Practices",description:"",content:""}).add({id:9,href:"/docs/project-guidelines/load-balancing/",title:"Load Balancing",description:"EKS # Mis-configured Load balancers can expose the service to the wider internet.\nFor full information on configuring a load balancer read the offcial k8s documentation.\nPrevent Exposure to 0.0.0.0/0 # AWS load balancers are automatically exposed to the wider internet. To prevent this configure the load balancer with the following annotation providing your private subnet range:\nservice.beta.kubernetes.io/load-balancer-source-ranges: 10.0.0.0/16  Also, if you have any explicit annotation to 0.0.0.0/0 please remove it.",content:"EKS # Mis-configured Load balancers can expose the service to the wider internet.\nFor full information on configuring a load balancer read the offcial k8s documentation.\nPrevent Exposure to 0.0.0.0/0 # AWS load balancers are automatically exposed to the wider internet. To prevent this configure the load balancer with the following annotation providing your private subnet range:\nservice.beta.kubernetes.io/load-balancer-source-ranges: 10.0.0.0/16  Also, if you have any explicit annotation to 0.0.0.0/0 please remove it.\nFurther documentation can be found in the official docs\n"}).add({id:10,href:"/docs/getting-started/helm/",title:"Helm",description:"What is Helm? # Helm is a tool for deploying reusable components to Kubernetes clusters. The introduction to Helm is a good starting point for working with Helm\nInstallation # Helm Repo Structure # Typical helm repo will have below structure -\n. |____environments # Configuration for the environments | |____shared | | |____shared-values.yaml # Shared values to be used across all environments | |____stage # configuration for Stage | | |____stage-values.",content:"What is Helm? # Helm is a tool for deploying reusable components to Kubernetes clusters. The introduction to Helm is a good starting point for working with Helm\nInstallation # Helm Repo Structure # Typical helm repo will have below structure -\n. |____environments # Configuration for the environments | |____shared | | |____shared-values.yaml # Shared values to be used across all environments | |____stage # configuration for Stage | | |____stage-values.yaml | |____alpha | | |____alpha-values.yaml |____Chart.yaml # Defines Chart metadata and versions. Update versions using semantic versioning |____.helmignore # Helm file for if the chart is packaged into a zip not always required |____README.md # Containing information about how to apply the chart and what the configurable values do |____templates # A folder containing the kuberentes mainfests that will be configured with passed values # Structure can be unique to chart. Changes here impact the logic of the chart | |____deployment.yaml # example file | |____'_helpers.tpl' # without quotes. Contains variable transformations for convenience in the other templates | |____NOTES.txt # Defines output to console as chart is deployed |____values.yaml # Defines default values that came from the original chart generally you should not change these as it can have a wide impact  Useful Commands # List the helm deployments -\nhelm list  Upgrade helm chart -\nhelm upgrade -i [release-name] [path-to-chart.yaml/.] -n [deploy-namespace] --values=environments/shared/shared-values.yaml --values=environments/alpha/[env-name]-values.yaml  "}).add({id:11,href:"/docs/project-guidelines/ci-cd/",title:"CI/CD",description:" CI/CD Jenkins Flow  ",content:" CI/CD Jenkins Flow  "}).add({id:12,href:"/docs/getting-started/github-guidelines/",title:"Github Guidelines",description:"Git Flow #  Clone the repository to your local If you had already cloned the repo, pull the latest changes from master/main branch Create a new branch Do your changes Regularly commit and push your changes to remote branch Once you are done with your changes, raise PR and assign reviewers Address any review comments After the PR is approved, merge your changes to master/main  Access # If you are getting any access issues as shown below when trying to create a branch/push to the repository, please reach out to your team lead to get the required access.",content:"Git Flow #  Clone the repository to your local If you had already cloned the repo, pull the latest changes from master/main branch Create a new branch Do your changes Regularly commit and push your changes to remote branch Once you are done with your changes, raise PR and assign reviewers Address any review comments After the PR is approved, merge your changes to master/main  Access # If you are getting any access issues as shown below when trying to create a branch/push to the repository, please reach out to your team lead to get the required access.\n⚠️  Please make sure you have correct access rights and the repository exists   Branching # Once your PR is merged, please delete the branch to keep the repository clean.\nPR # "}).add({id:13,href:"/docs/project-guidelines/kubernetes-probes/",title:"Kubernetes Probes",description:"We recommend that you set below probes for your deployment.\nStartUp Probe # Note  If the startup probe never succeeds, the container is killed after 300s and subject to the pod's restartPolicy. Set up startup probe with a failureThreshold * periodSeconds long enough to cover the worse case startup time\n The kubelet uses startup probes to know when a container application has started.\nIf such a probe is configured, it disables liveness and readiness checks until it succeeds, making sure those probes don\u0026rsquo;t interfere with the application startup.",content:"We recommend that you set below probes for your deployment.\nStartUp Probe # Note  If the startup probe never succeeds, the container is killed after 300s and subject to the pod's restartPolicy. Set up startup probe with a failureThreshold * periodSeconds long enough to cover the worse case startup time\n The kubelet uses startup probes to know when a container application has started.\nIf such a probe is configured, it disables liveness and readiness checks until it succeeds, making sure those probes don\u0026rsquo;t interfere with the application startup.\nThis can be used to adopt liveness checks on slow starting containers, avoiding them getting killed by the kubelet before they are up and running.\nspec: template: spec: containers: - name: {{ .Chart.Name }} startupProbe: httpGet: path: /health port: http scheme: HTTP timeoutSeconds: 10 # number of seconds before marking the probe as timing out (failing the health check) periodSeconds: 10 # how often to check the probe successThreshold: 1 # minimum number of consecutive successful checks failureThreshold: 30 # number of retries before marking the probe as failed  In above configuration, the probe checks /health endpoint every 10 seconds until 5 mins (periodSeconds * failureThreshold = 300s).\nWithin that period if the health check endpoint returns success, then it would turn on liveness and readiness probes. Otherwise, it would fail.\nReadiness Probe # Note  Kubernetes makes sure the readiness probe passes before allowing a service to send traffic to the pod. If a readiness probe starts to fail, Kubernetes stops sending traffic to the pod until it passes.\n Readiness probes are designed to let Kubernetes know when your app is ready to serve traffic.\nspec: template: spec: containers: - name: {{ .Chart.Name }} readinessProbe: httpGet: path: /health port: http scheme: HTTP timeoutSeconds: 10 periodSeconds: 10 successThreshold: 1 failureThreshold: 3  Liveness Probe # Note  We recommend you use a startupProbe along with a liveness probe. If your liveness probe fails, it will restart your container.\nIncorrect configuration (e.g. App takes more time to startup than the configured delays) will result in a constant restart loop.\n spec: template: spec: containers: - name: {{ .Chart.Name }} livenessProbe: httpGet: path: /health port: http scheme: HTTP timeoutSeconds: 10 periodSeconds: 10 successThreshold: 1 failureThreshold: 3  "}).add({id:14,href:"/docs/getting-started/web-tools/",title:"Web Tools",description:"",content:""}).add({id:15,href:"/docs/getting-started/recordings/",title:"Recordings",description:"Recorded sessions on Architecture Overview, KT\u0026rsquo;s and other topics are available below:",content:"Recorded sessions on Architecture Overview, KT\u0026rsquo;s and other topics are available below:\n"}).add({id:16,href:"/docs/",title:"Docs",description:"Docs Doks.",content:""}),search.addEventListener('input',b,!0);function b(){var b,e;const d=5;b=this.value,e=a.search(b,{limit:d,enrich:!0});const c=new Map;for(const a of e.flatMap(a=>a.result)){if(c.has(a.doc.href))continue;c.set(a.doc.href,a.doc)}if(suggestions.innerHTML="",suggestions.classList.remove('d-none'),c.size===0&&b){const a=document.createElement('div');a.innerHTML=`No results for "<strong>${b}</strong>"`,a.classList.add("suggestion__no-results"),suggestions.appendChild(a);return}for(const[h,g]of c){const b=document.createElement('div');suggestions.appendChild(b);const a=document.createElement('a');a.href=h,b.appendChild(a);const e=document.createElement('span');e.textContent=g.title,e.classList.add("suggestion__title"),a.appendChild(e);const f=document.createElement('span');if(f.textContent=g.description,f.classList.add("suggestion__description"),a.appendChild(f),suggestions.appendChild(b),suggestions.childElementCount==d)break}}})()